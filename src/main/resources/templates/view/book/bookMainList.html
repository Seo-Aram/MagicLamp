<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Board Main List</title>
    <script src="https://code.jquery.com/jquery-1.12.4.js"
            integrity="sha256-Qw82+bXyGq6MydymqBxNPYTaUXXq7c8v3CwiYwLLNXU=" crossorigin="anonymous"></script>
</head>
<body>
<!--내비게이션 시작-->
<!--내비게이션 끝-->

<!-- 도서 리스트 시작-->

<table>
    <thead style="background-color: #285430">
    <tr>
        <th>ISBN</th>
        <th>제목</th>
        <th>저자</th>
        <th>출간일</th>
        <th>재고</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="book : ${BookMainListPage.list}">
        <td th:text="${book.isbn}"></td>
        <td>
            <a th:text="${book.title}"
               th:href="@{/view/book/bookView(isbn=${book.isbn},p=${BookMainListPage.pagenum})}"></a>
        </td>
        <td th:text="${book.author}"></td>
        <td th:text="${book.pubdate}"></td>
        <td th:text="${book.stock}"></td>
    </tr>
    </tbody>
</table>

<!--페이징 시작-->

<table style="margin-left:auto; margin-right:auto;">
    <Tr>
        <Td>
            <nav>
                <ul>
                    <th:block th:if="${BookMainListPage.prev}">
                        <li>
                            <a th:href="@{/view/book/bookMainList(p=${BookMainListPage.startnum-1})}">PREV</a>
                        </li>
                    </th:block>
                    <th:block th:each="num : ${#numbers.sequence(BookMainListPage.startnum, BookMainListPage.endnum)}" th:with="active=${BookMainListPage.pagenum == num ? 'active' : ''}">
                        <li th:classappend="${active}">
                            <a th:href="@{/view/book/bookMainList(p=${num})}" th:text="${num}"></a>
                        </li>
                    </th:block>
                    <th:block th:if="${BookMainListPage.next}">
                        <li>
                            <a th:href="@{/view/book/bookMainList(p=${BookMainListPage.endnum+1})}">NEXT</a>
                        </li>
                    </th:block>
                </ul>
            </nav>
        </Td>
    </Tr>
</table>

<!--페이징 끝-->



<table>
    <th:block th:each="book, bookStat : ${BookMainListPage.list}">
        <tr>
            <td colspan="4">
                <hr/>
            </td>
        </tr>
        <tr>
            <td width="5%" style="text-align: center">
                <div th:text="${bookStat.count} + '.'"></div>
                <input type="checkbox" name="checkBook">
            </td>
            <td width="10%">
                <a th:href="@{/view/book/bookView(isbn=${book.isbn},p=${BookMainListPage.pagenum})}">
                    <img th:src="@{/upload/bphoto/{name}(name=${book.bookimg})}" height="200">
                </a>
            </td>
            <td width="65%">
                <div>
                    <a th:text="${book.title}"
                       th:href="@{/view/book/bookView(isbn=${book.isbn},p=${BookMainListPage.pagenum})}"></a>
                </div>
                <div th:text="${book.author + ' | ' + book.publisher + ' | ' + book.pubdate}"></div>
                <div th:text="${#numbers.formatInteger(book.price, 0, 'COMMA')}" style="display: inline"></div>
                ->
                <div th:text="${#numbers.formatInteger(book.saleprice, 0, 'COMMA')} + ' (10% 할인)'"
                     style="display: inline"></div>
                <div th:text="${', 마일리지: ' + #numbers.formatInteger((book.saleprice*book.mileagerate/100), 0, 'COMMA') + '원 (' + book.mileagerate + '% 적립)'}"
                     style="display: inline"></div>
                <!--<div th:text="${book.title}"></div> 별점 -->
            </td>
            <td width="20%" style="text-align: center">
                <div>
                    <button>장바구니 담기</button>
                </div>
                <div>
                    <button>바로구매</button>
                </div>
            </td>
        </tr>

    </th:block>

</table>


<!-- 도서 리스트 끝-->


</body>
</html>